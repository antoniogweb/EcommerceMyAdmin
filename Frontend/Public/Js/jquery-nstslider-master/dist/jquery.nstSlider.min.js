/*! Nestoria Slider - v1.0.13 - 2015-07-16
* http://lokku.github.io/jquery-nstslider/
* Copyright (c) 2015 Lokku Ltd.; Licensed MIT */ !function(t){var a,i,e,r,n,l,s,o,d,h={setNakedBarDelta:function(t,a){if("stickToSides"===t)d={toEndWidth:a,toBeginLeft:0,toBeginWidth:a};else if("middle"===t)d={toEndWidth:a/2,toBeginLeft:a/2,toBeginWidth:a/2};else throw Error("unknown position of setNakedBarDelta: "+t)},getSliderValuesAtPositionPx:function(t,a){var i,e,r=this.data("pixel_to_value_mapping");if(void 0!==r)i=r(t),e=r(a);else{var n=h.getSliderWidthPx.call(this)-this.data("left_grip_width");i=h.inverse_rangemap_0_to_n.call(this,t,n),e=h.inverse_rangemap_0_to_n.call(this,a,n)}return[i,e]},validateAndMoveGripsToPx:function(t,a){var i=h.getSliderWidthPx.call(this)-this.data("left_grip_width");if(a<=i&&t>=0&&t<=i&&(!this.data("has_right_grip")||t<=a)){var e=this.data("cur_min"),r=this.data("cur_max");h.set_position_from_px.call(this,t,a),h.refresh_grips_style.call(this),h.notify_changed_implicit.call(this,"drag_move",e,r)}return this},updateAriaAttributes:function(){var t=this.data("settings"),a=this.find(t.left_grip_selector);if(this.data("has_right_grip")){var i=this.find(t.right_grip_selector);a.attr("aria-valuemin",this.data("range_min")).attr("aria-valuenow",c.get_current_min_value.call(this)).attr("aria-valuemax",c.get_current_max_value.call(this)),i.attr("aria-valuemin",c.get_current_min_value.call(this)).attr("aria-valuenow",c.get_current_max_value.call(this)).attr("aria-valuemax",this.data("range_max"))}else a.attr("aria-valuemin",this.data("range_min")).attr("aria-valuenow",c.get_current_min_value.call(this)).attr("aria-valuemax",this.data("range_max"));return this},getSliderWidthPx:function(){if(this.closest(".uk-offcanvas-bar").length>0){var t=this.closest(".uk-offcanvas-bar").width()-10;return Math.round(t)}if(this.closest(".uk-accordion").length>0){var t=this.closest(".uk-accordion").width()-10;return Math.round(t)}return Math.round(this.width())},getGripPositionPx:function(t){return parseInt(t.css("left").replace("px",""),10)},getLeftGripPositionPx:function(){var t=this.data("settings"),a=this.find(t.left_grip_selector);return h.getGripPositionPx.call(this,a)},getRightGripPositionPx:function(){var t=this.data("settings");if(this.data("has_right_grip"))return h.getGripPositionPx.call(this,this.find(t.right_grip_selector));var a=h.getSliderWidthPx.call(this)-this.data("left_grip_width");return h.rangemap_0_to_n.call(this,this.data("cur_max"),a)},getLeftGripWidth:function(){var t=this.data("settings");return Math.round(this.find(t.left_grip_selector).outerWidth())},getRightGripWidth:function(){var t=this.data("settings");return Math.round(this.find(t.right_grip_selector).outerWidth())},binarySearchValueToPxCompareFunc:function(a,i,e){return a===i[e]||a<i[e]&&0===e||i[e-1]<=a&&a<i[e]?0:a>i[e]?1:a<=i[e-1]?-1:void t.error("cannot compare s: "+a+" with a["+e+"]. a is: "+i.join(","))},binarySearch:function(t,a,i,e){for(var r,n,l=0,s=t.length-1;l<=s;){n=i(t,r=(l+s)/2|0);var o=e(a,t,r);if(o>0)l=r+1;else{if(!(o<0))return r;s=r-1}}return -1},haveLimits:function(){var t=this.data("lower-limit"),a=this.data("upper-limit"),i=!1;return void 0!==t&&void 0!==a&&(i=!0),i},refresh_grips_style:function(){var t=this.data("settings");if(void 0!==t.highlight){var a=this.data("highlightedRangeMin");if(void 0!==a){var i=this.find(t.left_grip_selector),e=this.find(t.right_grip_selector),r=this.data("highlightedRangeMax"),n=this.data("cur_min"),l=this.data("cur_max"),s=t.highlight.grip_class;n<a||n>r?i.removeClass(s):i.addClass(s),l<a||l>r?e.removeClass(s):e.addClass(s)}}},set_position_from_val:function(t,a){var i=this.data("range_min"),e=this.data("range_max");t<i&&(t=i),t>e&&(t=e),this.data("has_right_grip")?(a>e&&(a=e),a<i&&(a=i)):a=this.data("cur_max");var r=c.value_to_px.call(this,t),n=c.value_to_px.call(this,a);return h.set_handles_at_px.call(this,r,n),this.data("cur_min",t),this.data("has_right_grip")&&this.data("cur_max",a),this},set_position_from_px:function(t,a){h.set_handles_at_px.call(this,t,a);var i=h.getSliderValuesAtPositionPx.call(this,t,a),e=i[0],r=i[1];return this.data("cur_min",e),this.data("has_right_grip")&&this.data("cur_max",r),this},set_handles_at_px:function(t,a){var i=this.data("settings"),e=i.left_grip_selector,r=i.right_grip_selector,n=i.value_bar_selector,l=this.data("left_grip_width");return this.find(e).css("left",t+"px"),this.find(r).css("left",a+"px"),this.data("has_right_grip")?this.find(n).css("left",t+"px").css("width",a-t+l+"px"):(d||h.populateNakedBarDeltas.call(this,t,a,l),a>t?this.find(n).css("left",t+"px").css("width",a-t+d.toEndWidth+"px"):this.find(n).css("left",a+d.toBeginLeft+"px").css("width",t-a+d.toBeginWidth+"px")),this},drag_start_func_touch:function(t,a,i,r,n){var l=t.originalEvent,s=l.touches[0],o=s.pageY,d=s.pageX,c=Math.abs(this.offset().top-o),u=this.offset().left,g=d-(u+this.width());!(c>a.touch_tolerance_value_bar_y)&&!(u-d>a.touch_tolerance_value_bar_x)&&!(g>a.touch_tolerance_value_bar_x)&&(l.preventDefault(),e=s.pageX,h.drag_start_func.call(this,s,a,i,r,n))},drag_start_func:function(e,n,l,s,o){if(this.find(n.left_grip_selector+","+n.value_bar_selector+","+n.right_grip_selector).removeClass(n.animating_css_class),c.is_enabled.call(this)){var d=t(e.target),u=!1;if("object"==typeof n.highlight&&(u=d.is(n.highlight.panel_selector)),!1!==o||d.is(n.left_grip_selector)||d.is(n.right_grip_selector)||d.is(n.value_bar_selector)||u||d.is(this)){a=this;var g,f,v,p,m,x,$=h.getGripPositionPx.call(this,l),b=h.getSliderWidthPx.call(this)-this.data("left_grip_width"),_=l.offset().left,P=h.getRightGripPositionPx.call(this);v=Math.abs(_-(f=Math.round(e.pageX)-this.data("left_grip_width")/2)),m=f-_,this.data("has_right_grip")?(p=Math.abs((g=s.offset().left)-f),x=f-g):(p=2*v,x=2*m),n.user_drag_start_callback.call(this,e),v===p?f<_?($+=m,r=!0):(P+=x,r=!1):v<p?($+=m,r=!0):(P+=x,r=!1),this.data("has_right_grip")?P>b&&(P=b):$>b&&($=b),$<0&&($=0),i=!0;var w=this.data("cur_min"),y=this.data("cur_max");h.set_position_from_px.call(this,$,P),h.refresh_grips_style.call(this),h.notify_changed_implicit.call(this,"drag_start",w,y),"[object Touch]"!==Object.prototype.toString.apply(e)&&e.preventDefault()}}},drag_move_func_touch:function(t){if(!0===i){var a=t.originalEvent;a.preventDefault();var e=a.touches[0];h.drag_move_func(e)}},drag_move_func:function(t){if(i){var n=a,l=n.data("settings"),s=h.getSliderWidthPx.call(n)-n.data("left_grip_width"),o=h.getLeftGripPositionPx.call(n),d=h.getRightGripPositionPx.call(n),c=Math.round(t.pageX),u=c-e,g=n.data("left_grip_width")/2,f=n.offset().left+n.data("left_grip_width")-g,v=f+s;!1===l.crossable_handles&&n.data("has_right_grip")&&(r?v=f+d:f+=o);var p=0,m=0;c<f&&(p=1,m=0),c>v&&(m=1,p=0),!0===l.crossable_handles&&n.data("has_right_grip")&&(r?d<=s&&o+u>d&&(r=!1,o=d):o>=0&&d+u<o&&(r=!0,d=o));var x=o,$=d;(u>0&&!p||u<0&&!m)&&(r?x+=u:$+=u),h.validateAndMoveGripsToPx.call(n,x,$),e=c,"[object Touch]"!==Object.prototype.toString.apply(t)&&t.preventDefault()}},drag_end_func_touch:function(t){var a=t.originalEvent;a.preventDefault();var i=a.touches[0];h.drag_end_func(i)},drag_end_func:function(){var t=a;if(void 0!==t){i=!1,e=void 0,h.notify_mouse_up_implicit.call(t,r),a=void 0;var n=t.data("settings");t.find(n.left_grip_selector+","+n.value_bar_selector+","+n.right_grip_selector).addClass(n.animating_css_class)}},get_rounding_for_value:function(t){var a=this.data("rounding"),i=this.data("rounding_ranges");if("object"==typeof i){var e=h.binarySearch.call(this,i,t,function(t,a){return t[a].range},function(t,a,i){return t<a[i].range?i>0?t>=a[i-1].range?0:-1:0:1});if(a=1,e>-1)a=parseInt(i[e].value,10);else{var r=i.length-1;t>=i[r].range&&(a=i[r].value)}}return a},notify_mouse_up_implicit:function(t){var a=c.get_current_min_value.call(this),i=c.get_current_max_value.call(this),e=!1;return(this.data("beforestart_min")!==a||this.data("beforestart_max")!==i)&&(e=!0,this.data("beforestart_min",a),this.data("beforestart_max",i)),this.data("settings").user_mouseup_callback.call(this,c.get_current_min_value.call(this),c.get_current_max_value.call(this),t,e),this},notify_changed_implicit:function(t,a,i){var e=!1;("init"===t||"refresh"===t)&&(e=!0);var r=c.get_current_min_value.call(this),n=c.get_current_max_value.call(this);return e||(a=c.round_value_according_to_rounding.call(this,a),i=c.round_value_according_to_rounding.call(this,i)),(e||r!==a||n!==i)&&(h.notify_changed_explicit.call(this,t,a,i,r,n),e=1),e},notify_changed_explicit:function(t,a,i,e,r){var n=this.data("settings");return this.data("aria_enabled")&&h.updateAriaAttributes.call(this),n.value_changed_callback.call(this,t,e,r,a,i),this},validate_params:function(a){var i=this.data("range_min"),e=this.data("range_max"),r=this.data("cur_min"),n=this.data("lower-limit"),l=this.data("upper-limit"),s=h.haveLimits.call(this);void 0===i&&t.error("the data-range_min attribute was not defined"),void 0===e&&t.error("the data-range_max attribute was not defined"),void 0===r&&t.error("the data-cur_min attribute must be defined"),i>e&&t.error("Invalid input parameter. must be min < max"),s&&n>l&&t.error("Invalid data-lower-limit or data-upper-limit"),0===this.find(a.left_grip_selector).length&&t.error("Cannot find element pointed by left_grip_selector: "+a.left_grip_selector),void 0!==a.right_grip_selector&&0===this.find(a.right_grip_selector).length&&t.error("Cannot find element pointed by right_grip_selector: "+a.right_grip_selector),void 0!==a.value_bar_selector&&0===this.find(a.value_bar_selector).length&&t.error("Cannot find element pointed by value_bar_selector"+a.value_bar_selector)},rangemap_0_to_n:function(t,a){var i=this.data("range_min"),e=this.data("range_max");return t<=i?0:t>=e?a:Math.floor((a*t-a*i)/(e-i))},inverse_rangemap_0_to_n:function(t,a){var i=this.data("range_min"),e=this.data("range_max");return t<=0?i:t>=a?e:(e-i)*t/a+i}},c={teardown:function(){return this.removeData(),t(document).unbind("mousemove.nstSlider").unbind("mouseup.nstSlider"),this.parent().unbind("mousedown.nstSlider").unbind("touchstart.nstSlider").unbind("touchmove.nstSlider").unbind("touchend.nstSlider"),this.unbind("keydown.nstSlider").unbind("keyup.nstSlider"),this},init:function(a){var i=t.extend({animating_css_class:"nst-animating",touch_tolerance_value_bar_y:30,touch_tolerance_value_bar_x:15,left_grip_selector:".nst-slider-grip-left",right_grip_selector:void 0,highlight:void 0,rounding:void 0,value_bar_selector:void 0,crossable_handles:!0,value_changed_callback:function(){},user_mouseup_callback:function(){},user_drag_start_callback:function(){}},a),e=t(document);return e.unbind("mouseup.nstSlider"),e.unbind("mousemove.nstSlider"),e.bind("mousemove.nstSlider",h.drag_move_func),e.bind("mouseup.nstSlider",h.drag_end_func),this.each(function(){var a=t(this),e=a.parent();a.data("enabled",!0);var d=a.data("range_min"),u=a.data("range_max"),g=a.data("cur_min"),f=a.data("cur_max");void 0===f&&(f=g),""===d&&(d=0),""===u&&(u=0),""===g&&(g=0),""===f&&(f=0),a.data("range_min",d),a.data("range_max",u),a.data("cur_min",g),a.data("cur_max",f),h.validate_params.call(a,i),a.data("settings",i),void 0!==i.rounding?c.set_rounding.call(a,i.rounding):void 0!==a.data("rounding")?c.set_rounding.call(a,a.data("rounding")):c.set_rounding.call(a,1);var v=t(a.find(i.left_grip_selector)[0]),p=t(a.find(i.right_grip_selector)[0]);void 0===v.attr("tabindex")&&v.attr("tabindex",0);var m=!1;a.find(i.right_grip_selector).length>0&&(m=!0,void 0===p.attr("tabindex")&&p.attr("tabindex",0)),a.data("has_right_grip",m),!0===a.data("aria_enabled")&&(v.attr("role","slider").attr("aria-disabled","false"),m&&p.attr("role","slider").attr("aria-disabled","false")),a.bind("keyup.nstSlider",function(t){if(a.data("enabled")){switch(t.which){case 37:case 38:case 39:case 40:if(n===s){var i,e,d,u=h.getSliderWidthPx.call(a);if(l-o<0){for(e=o;e<=u;e++)if((i=c.round_value_according_to_rounding.call(a,h.getSliderValuesAtPositionPx.call(a,e,e)[1]))!==s){d=e;break}}else for(e=o;e>=0;e--)if((i=c.round_value_according_to_rounding.call(a,h.getSliderValuesAtPositionPx.call(a,e,e)[1]))!==s){d=e;break}r?h.validateAndMoveGripsToPx.call(a,d,h.getRightGripPositionPx.call(a)):h.validateAndMoveGripsToPx.call(a,h.getLeftGripPositionPx.call(a),d),h.notify_mouse_up_implicit.call(a,r)}}n=void 0,l=void 0,s=void 0,o=void 0}}),a.bind("keydown.nstSlider",function(t){if(a.data("enabled")){var i=function(t,i){var e=h.getLeftGripPositionPx.call(a),d=h.getRightGripPositionPx.call(a);switch(void 0===n&&(l=r?e:d,n=r?c.get_current_min_value.call(a):c.get_current_max_value.call(a)),i.which){case 37:case 40:r?e--:d--,i.preventDefault();break;case 38:case 39:r?e++:d++,i.preventDefault()}o=r?e:d,h.validateAndMoveGripsToPx.call(a,e,d),s=r?c.get_current_min_value.call(a):c.get_current_max_value.call(a)};m&&a.find(":focus").is(p)?(r=!1,i.call(a,p,t)):(r=!0,i.call(a,v,t))}});var x=h.getLeftGripWidth.call(a),$=m?h.getRightGripWidth.call(a):x;if(a.data("left_grip_width",x),a.data("right_grip_width",$),a.data("value_bar_selector",i.value_bar_selector),!m){var b=f===u||f===d;h.setNakedBarDelta.call(a,b?"stickToSides":"middle",x)}d===u||g===f?c.set_range.call(a,d,u):h.set_position_from_val.call(a,a.data("cur_min"),a.data("cur_max")),h.notify_changed_implicit.call(a,"init"),a.data("beforestart_min",c.get_current_min_value.call(a)),a.data("beforestart_max",c.get_current_max_value.call(a)),a.bind("mousedown.nstSlider",function(t){h.drag_start_func.call(a,t,i,v,p,!1)}),e.bind("touchstart.nstSlider",function(t){h.drag_start_func_touch.call(a,t,i,v,p,!0)}),e.bind("touchend.nstSlider",function(t){h.drag_end_func_touch.call(a,t)}),e.bind("touchmove.nstSlider",function(t){h.drag_move_func_touch.call(a,t)});var _=a.data("histogram");void 0!==_&&c.set_step_histogram.call(a,_)})},get_range_min:function(){return this.data("range_min")},get_range_max:function(){return this.data("range_max")},get_current_min_value:function(){var a,i=t(this),e=c.get_range_min.call(i),r=c.get_range_max.call(i),n=i.data("cur_min");if(a=e>=n?e:c.round_value_according_to_rounding.call(i,n),h.haveLimits.call(i)){if(a<=e)return i.data("lower-limit");if(a>=r)return i.data("upper-limit")}else{if(a<=e)return e;if(a>=r)return r}return a},get_current_max_value:function(){var a,i=t(this),e=c.get_range_min.call(i),r=c.get_range_max.call(i),n=i.data("cur_max");if(a=r<=n?r:c.round_value_according_to_rounding.call(i,n),h.haveLimits.call(i)){if(a>=r)return i.data("upper-limit");if(a<=e)return i.data("lower-limit")}else{if(a>=r)return r;if(a<=e)return e}return a},is_handle_to_left_extreme:function(){return h.haveLimits.call(this)?this.data("lower-limit")===c.get_current_min_value.call(this):c.get_range_min.call(this)===c.get_current_min_value.call(this)},is_handle_to_right_extreme:function(){return h.haveLimits.call(this)?this.data("upper-limit")===c.get_current_max_value.call(this):c.get_range_max.call(this)===c.get_current_max_value.call(this)},refresh:function(){var t=this.data("last_step_histogram");void 0!==t&&c.set_step_histogram.call(this,t),h.set_position_from_val.call(this,c.get_current_min_value.call(this),c.get_current_max_value.call(this));var a=this.data("highlightedRangeMin");if("number"==typeof a){var i=this.data("highlightedRangeMax");c.highlight_range.call(this,a,i)}return h.notify_changed_implicit.call(this,"refresh"),this},disable:function(){var t=this.data("settings");return this.data("enabled",!1).find(t.left_grip_selector).attr("aria-disabled","true").end().find(t.right_grip_selector).attr("aria-disabled","true"),this},enable:function(){var t=this.data("settings");return this.data("enabled",!0).find(t.left_grip_selector).attr("aria-disabled","false").end().find(t.right_grip_selector).attr("aria-disabled","false"),this},is_enabled:function(){return this.data("enabled")},set_position:function(t,a){var i=this.data("cur_min"),e=this.data("cur_max");t>a?h.set_position_from_val.call(this,a,t):h.set_position_from_val.call(this,t,a),h.refresh_grips_style.call(this),h.notify_changed_implicit.call(this,"set_position",i,e),this.data("beforestart_min",t),this.data("beforestart_max",a)},set_step_histogram:function(a){var i,e=this;e.data("last_step_histogram",a),void 0===a&&(t.error("got an undefined histogram in set_step_histogram"),h.unset_step_histogram.call(e));var r=h.getSliderWidthPx.call(e)-e.data("left_grip_width"),n=a.length;if(!(r<=0)){var l=0;for(i=0;i<n;i++)l+=a[i];if(0===l)return c.unset_step_histogram.call(e),e;var s=parseFloat(l)/r;for(i=0;i<n;i++)a[i]=a[i]/s;var o=[a[0]];for(i=1;i<n;i++){var d=o[i-1]+a[i];o.push(d)}o.push(r);for(var u=[e.data("range_min")],g=0,f=u[0],v=0;g<=r;){var p=parseInt(o.shift(),10),m=h.inverse_rangemap_0_to_n.call(e,v+1,n+1);v++;var x=p-g,$=m-f;for(i=g;i<p;i++){var b=f+$*(i-g+1)/x;u.push(b),g++,f=b}if(g===r)break}u[u.length-1]=e.data("range_max");var _=function(t){return u[parseInt(t,10)]},P=function(t){var a=h.binarySearch.call(e,u,t,function(t,a){return t[a]},h.binarySearchValueToPxCompareFunc);return u[a]===t?a:Math.abs(u[a-1]-t)<Math.abs(u[a]-t)?a-1:a};return e.data("pixel_to_value_mapping",_),e.data("value_to_pixel_mapping",P),e}},unset_step_histogram:function(){return this.removeData("pixel_to_value_mapping"),this.removeData("value_to_pixel_mapping"),this.removeData("last_step_histogram"),this},set_range:function(t,a){var i=c.get_current_min_value.call(this),e=c.get_current_max_value.call(this);return this.data("range_min",t),this.data("range_max",a),h.set_position_from_val.call(this,i,e),h.notify_changed_implicit.call(this,"set_range",i,e),this},highlight_range:function(a,i){var e=this.data("settings");void 0===e.highlight&&t.error('you cannot call highlight_range if you haven\' specified the "highlight" parameter in construction!'),a||(a=0),i||(i=0);var r=c.value_to_px.call(this,a),n=c.value_to_px.call(this,i)-r+this.data("left_grip_width"),l=this.find(e.highlight.panel_selector);return l.css("left",r+"px"),l.css("width",n+"px"),this.data("highlightedRangeMin",a),this.data("highlightedRangeMax",i),h.refresh_grips_style.call(this),this},set_rounding:function(a){"string"==typeof a&&a.indexOf("{")>-1&&(a=t.parseJSON(a)),this.data("rounding",a);var i,e=[];if("object"==typeof a){for(i in a)if(a.hasOwnProperty(i)){var r=a[i];e.push({range:r,value:i})}e.sort(function(t,a){return t.range-a.range}),this.data("rounding_ranges",e)}else this.removeData("rounding_ranges");return this},get_rounding:function(){return this.data("rounding")},round_value_according_to_rounding:function(a){var i=h.get_rounding_for_value.call(this,a);if(i>0){var e=a/i,r=parseInt(e,10);return e-r>.5&&r++,r*i}return t.error("rounding must be > 0, got "+i+" instead"),a},value_to_px:function(t){var a=this.data("value_to_pixel_mapping");if(void 0!==a)return a(t);var i=h.getSliderWidthPx.call(this)-this.data("left_grip_width");return h.rangemap_0_to_n.call(this,t,i)}},u="nstSlider";t.fn[u]=function(a){if(c[a]){if(!0===this.data("initialized"))return c[a].apply(this,Array.prototype.slice.call(arguments,1));throw Error("method "+a+" called on an uninitialized instance of "+u)}if("object"==typeof a||!a)return this.data("initialized",!0),c.init.apply(this,arguments);t.error("Cannot call method "+a)}}(jQuery);
